<script>
document.addEventListener("DOMContentLoaded", function () {

  // HTML lang 값 가져오기
  let lang = document.documentElement.lang || "en";
  lang = lang.toLowerCase();

  let searchFile = "/assets/js/data/search-en.json";
  let noResultMessage = "<p>No results found.</p>";  // 기본: 영어

  // 언어별 JSON 파일 + 메시지 세팅
  if (lang === "ja" || lang === "ja-jp") {
    searchFile = "/assets/js/data/search-ja.json";
    noResultMessage = "<p>該当する検索結果がありません。</p>";
  }
  else if (lang === "zh" || lang === "zh-cn") {
    searchFile = "/assets/js/data/search-zh.json";
    noResultMessage = "<p>未找到相关搜索结果。</p>";
  }
  else if (lang === "ko" || lang === "ko-kr") {
    // 혹시 한국어 블로그도 검색 기능 쓸 경우 대비
    searchFile = "/assets/js/data/search-ko.json";
    noResultMessage = "<p>검색 결과가 없습니다.</p>";
  }

  console.log("Loaded search file:", searchFile);

  SimpleJekyllSearch({
    searchInput: document.getElementById("search-input"),
    resultsContainer: document.getElementById("search-results"),
    json: searchFile,
    searchResultTemplate:
      '<article><h2><a href="{url}">{title}</a></h2><p>{content}</p></article>',
    noResultsText: noResultMessage
  });
});
</script>
